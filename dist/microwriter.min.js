!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).microwriter={})}(this,(function(e){"use strict";class t{constructor(e){this.isPaused=!0,this.isDeleting=!1,this.charsWritten=0,this.lineIndex=0,this.timerId=null;if(!(e.target instanceof HTMLElement))throw new Error("Microwriter: options.target is not an HTMLElement");if(!Array.isArray(e.lines))throw new Error("Microwriter: options.lines is not an array");this.target=e.target,this.lines=e.lines.map(String),this.writeSpeed=e.writeSpeed||200,this.deleteSpeed=e.deleteSpeed||this.writeSpeed,this.writeLineDelay=e.writeLineDelay||0,this.deleteLineDelay=e.deleteLineDelay||0,this.loop=e.loop||!1,this.preserve=e.preserve,this.tick=this.tick.bind(this)}start(){this.isPaused=!1,this.timerId=window.setTimeout(this.tick,this.delay)}pause(){this.timerId&&(window.clearTimeout(this.timerId),this.isPaused=!0,this.timerId=null)}replaceLines(e){this.pause(),this.resetState(),this.lines=e.map(String),this.start()}resetState(){this.pause(),this.isDeleting=!1,this.lineIndex=0,this.charsWritten=0}get currentLine(){return this.lines[this.lineIndex]}get delay(){return 0===this.charsWritten?this.writeLineDelay||this.writeSpeed:this.charsWritten===this.currentLine.length?this.preserve?this.deleteLineDelay:this.deleteLineDelay||this.deleteSpeed:this.isDeleting?this.deleteSpeed:this.writeSpeed}updateDirection(){const e=0===this.charsWritten,t=this.charsWritten===this.currentLine.length;this.preserve||e&&this.isDeleting?this.isDeleting=!1:t&&!this.isDeleting&&(this.isDeleting=!0)}updateCharsWritten(){const e=0===this.charsWritten;this.charsWritten===this.currentLine.length||this.isDeleting?e||!this.isDeleting||this.preserve||(this.charsWritten-=1):this.charsWritten+=1}updateText(){const e=this.currentLine.substr(0,this.charsWritten);this.target.innerHTML=e}setNextLine(){const e=0===this.charsWritten,t=this.charsWritten===this.currentLine.length,i=this.lineIndex===this.lines.length-1;if(e||t){if(i){if(!this.loop)return void this.pause();if(e||this.preserve)return void(this.lineIndex=0)}e&&(this.lineIndex+=1)}}tick(){this.isPaused||(this.updateCharsWritten(),this.updateText(),this.updateDirection(),this.setNextLine(),this.start())}}e.Microwriter=t,e.default=function(e){return new t(e)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=microwriter.min.js.map
